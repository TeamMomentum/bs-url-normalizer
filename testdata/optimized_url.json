{
  "description": "アドURLから実際のURLに変換します",
  "tests": [
    {
      "in": "http://live.nicovideo.jp/watch/lv999999999?ref=notify&zroute=subscribe",
      "n1url":"http://live.nicovideo.jp/watch/lv999999999/"
    },
    {
      "in":"http://ncode.syosetu.com/XXXXXXX/999/",
      "n1url":"http://ncode.syosetu.com/XXXXXXX/"
    },
    {
      "in":"http://dokuha.jp/comicweb/viewer/comic/real/99999999",
      "n1url":"http://dokuha.jp/comicweb/contents/comic/real/"
    },
    {
      "in":"https://novel.syosetu.org/99999/99.html",
      "n1url":"http://novel.syosetu.org/99999/"
    },
    {
      "in":"http://s.maho.jp/book/XXXXXXXXXXXXXXXX/9999999999/99/",
      "n1url":"http://s.maho.jp/book/XXXXXXXXXXXXXXXX/9999999999/"
    },
    {
      "in":"https://enjoy.point.auone.jp/gacha/foo/?token=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
      "n1url":"http://enjoy.point.auone.jp/gacha/"
    },
    {
      "in":"https://enjoy.point.auone.jp/reward/?medid=XXXXXXXXXX&srcid=YYYYYY&serial=9999&i=ZZZZZZ&ps=banner",
      "n1url":"http://enjoy.point.auone.jp/reward/"
    },
    {
      "in":"https://enjoy.point.auone.jp/enquete/?aid=XXXXXXXX&bid=YYYYYYY&cid=",
      "n1url":"http://enjoy.point.auone.jp/enquete/"
    },
    {
      "in":"http://uranai.nosv.org/recommend.php?urid=foo/bar",
      "n1url":"http://uranai.nosv.org/recommend.php/?urid=foo%2Fbar"
    },
    {
      "in":"http://uranai.nosv.org/favorite.php?crumb=99999999999999999999999999999999&add=foo/bar&p=99&commu_id=YYYYYYYYYYYYYYY",
      "n1url":"http://uranai.nosv.org/favorite.php/"
    },
    {
      "in":"http://amigo.gesoten.com/someone/event/9999999999",
      "n1url":"http://amigo.gesoten.com/"
    },
    {
      "in":"http://gaingame.gesoten.com/gaingame?user_id=000287102299&media_id=56&time=20171121001956&key=15E73E171612396096A3F68D8379841B",
      "n1url":"http://gaingame.gesoten.com/"
    },
    {
      "in":"http://adm.shinobi.jp/a/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX?x=150&y=0&url=http%3A%2F%2Fwww.example.com%2Fxyz%2Fabc%2Fpage%2F&referrer=&user_id=&du=http%3A%2F%2Fwww.example.com%2Fxyz%2Fabc%2Fpage%2F&iw=300&ih=250",
      "n1url":"http://www.example.com/xyz/abc/page/"
    },
    {
      "in":"https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-9999999999999999&output=html&h=250&slotname=9999999999&adk=9999999999&adf=9999999999&w=330&fwrn=2&lmt=9999999999&rafmt=3&format=330x250&url=https%3A%2F%2Fwww.example.com%2F2017%2F11%2F26%2Fpage%2F&region=hajisan&flash=0&fwr=0&resp_fmts=1&sfro=1&wgl=1&adsid=NT&dt=1511790352188&bpp=9999&bdt=9999&fdt=9999&idt=9999&shv=r99999999&cbv=r99999999&saldr=aa&prev_fmts=330x60%2C330x250&correlator=9999999999999&frm=20&ga_vid=9999999999.9999999999&ga_sid=9999999999&ga_hid=9999999999&ga_fc=0&pv=1&iag=3&icsg=2&nhd=1&dssz=2&mdo=0&mso=0&u_tz=540&u_his=1&u_java=1&u_h=640&u_w=360&u_ah=640&u_aw=360&u_cd=32&u_nplug=0&u_nmime=0&adx=15&ady=8035&biw=360&bih=540&abxe=1&eid=99999999%2C99999999&oid=3&rx=0&eae=0&fc=668&brdim=0%2C0%2C0%2C0%2C360%2C0%2C360%2C540%2C360%2C540&vis=1&rsz=%7C%7CpeEbr%7C&abl=CS&ppjl=f&pfx=0&fu=144&bc=1&ifi=4&xpc=XXXXXXXXXX&p=https%3A//hajimete-sangokushi.com&dtd=9999",
      "n1url":"http://www.example.com/2017/11/26/page/"
    },
    {
      "in":"https://securepubads.g.doubleclick.net/gampad/ads?gdfp_req=1&glade_req=1&glv=26&dt=1511772682906&output=html&iu=%2F99999999%2FP_SOMEONE&sz=300x250&sfv=1-0-10&correlator=9999999999999999&adk=9999999999&biw=320&bih=568&adx=10&ady=9999.9999&oid=3&u_sd=2&ifi=1&scp=EnableGAS%3DTrue&nhd=1&url=https%3A%2F%2Fwww.example.com%2F2017%2F11%2F27%2F472414%2F&top=www.example.com",
      "n1url":"http://www.example.com/2017/11/27/472414/"
    },
    {
      "in":"https://pubads.g.doubleclick.net/gampad/ads?os_version=11.4.0&u_sso=p&ios_base_sdk=11.4&request_id=9999&u_mwsso=p&u_so=p&js=afma-sdk-i-v7.31.0&is_arr=true&ios_app_volume=1&is_other_audio_playing=0&sai=1&ios_output_volume=0.6875&fbs_aiid=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&ios_current_boot_timestamp_ms=1303491339.552&eid=999999999%2C999999999&request_origin=pub&ms=XXXX&hl=ja&u_sd=2&ios_key_window_w=375&cellular_country_code=440&u_w=375&ios_radio=CTRadioAccessTechnologyLTE&u_h=667&submodel=iPhone9%2C1&ios_key_window_h=667&cap_bs=1&net=wi&ios_app_muted=0&binary_arch=arm64&should_silence_audio=0&cellular_network_code=20&_c_csdk_npa_o=false&_ad_b=300x250&format=300x250_as&ad_x=37.5&ad_y=275&ad_w=300&ad_h=250&ad_v=true&_package_name=jp.co.someone.app&an=43.0.0.iphone.jp.co.someone.app&u_audio=5&swipeable=1&dtxcb=XXXXXX&dtsdk=iphoneos11.4&adk=9999999999&preqs=10&seq_num=18&pimp=10&preqs_in_session=10&time_in_session=486.2405869998038&basets=63395&bas_on=0&oar=0&currts=999999&bas_off=0&crqc=1&treq=999999&tfetch=999999&tresponse=999999&tload=999999&dload=9999&output=html&region=mobile_app&u_tz=540&url=43.0.0.iphone.jp.co.someone.app.adsenseformobileapps.com&gdfp_req=1&markup=html&m_ast=afmajs&impl=ifr&iu=%2F9999999%2F9999999&sz=300x250&correlator=9999999999999999&_hl=ja-jp&gsb=wi&caps=interactiveVideo_inlineVideo_mraid1_mraid2_th_autoplay_mediation_av_sdkAdmobApiForAds_di_transparentBackground_sdkVideo_aso_sfv_dinm_dim_nav_navc_ct_dinmo_gls_saiMacro_gcache&swdr=fals",
      "n1url":"mobileapp::1-jp.co.someone.app"
    },
    {
      "in":"https://pubads.g.doubleclick.net/gampad/ads?_activity_context=false&android_num_video_cache_tasks=0&caps=inlineVideo_interactiveVideo_mraid1_mraid2_sdkVideo_th_autoplay_mediation_av_transparentBackground_sdkAdmobApiForAds_di_aso_sfv_dinm_dim_nav_navc_dinmo_ipdof_gls_gcache_xSeconds&eid=999999999%2C999999999%2C999999999&format=320x50_mb&heap_free=9999999&heap_max=999999999&heap_total=99999999&js=afma-sdk-a-v12843999.11717000.1&msid=jp.co.someone.app&preqs=6&scroll_index=-1&seq_num=7&target_api=16",
      "n1url":"mobileapp::2-jp.co.someone.app"
    },
    {
      "in":"http://d.socdm.com/adsv/v1?posall=SSPLOC&id=99999&tp=http%3A%2F%2Fwww.example.com%2Ftest%2Fabc.def%2Ftoday%2F1466646832&pp=http%3A%2F%2Fwww.example.com%2Ftest%2Fabc.def%2Ftoday%2F1466646832&rnd=1509797344050&targetID=adg_16795&sdkver=1.7.0&sdktype=0&acl=off",
      "n1url":"http://www.example.com/test/abc.def/today/1466646832/"
    },
    {
      "in":"http://d.socdm.com/adsv/v1?posall=SSPLOC&id=99999&sdktype=1&sdkver=1.5.0&appname=誰かのアップ&appbundle=jp.co.someone.app&appver=2.9.6.02&advertising_id=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&lang=ja&locale=ja_JP&tz=Asia/Tokyo",
      "n1url":"mobileapp::2-jp.co.someone.app"
    },
    {
      "in":"http://d.socdm.com/adsv/v1?posall=SSPLOC&id=99999&sdktype=2&sdkver=1.5.2&appname=FreeTube&appbundle=jp.co.someone.app&appver=1.5.3.2&networktype=carrier&carrier=440-20&lang=ja-JP&locale=ja_JP&tz=Asia/Tokyo&scheme=freetube",
      "n1url":"mobileapp::1-jp.co.someone.app"
    },
    {
      "in":"http://showads.pubmatic.com/AdServer/AdServerServlet?pubId=999999&siteId=999999&adId=9999999&kadwidth=320&kadheight=50&SAVersion=2&js=1&kdntuid=1&pageURL=http%3A%2F%2Fwww.example.com%2Fplus%2Fevent%3Futm_source%3D%26utm_medium%3Dbanner%26utm_campaign%3D%25E3%2583%25A2%25E3%2583%25A1%25E3%2583%25B3%25E3%2582%25BF%25E3%2583%25A0&inIframe=1&kadpageurl=http%3A%2F%2Fwww.example.com&operId=1&kltstamp=2017-11-27%208%3A57%3A9&timezone=9&screenResolution=414x736&ranreq=0.39262822122021623&pmUniAdId=0&adVisibility=2&adPosition=1403x0&dspids=%7B%22uids%22%3A%5B%5D%7D",
      "n1url":"http://www.example.com/plus/event/"
    },
    {
      "in":"http://s.yimg.jp/images/listing/tool/yads/yads-iframe.html/?enc=UTF-8&fr_id=yads_9999999-9&fr_support=1&page=1&pv_ts=9999999999999-9999999&s=99999_999999-999999&ssl=1&t=f&tag_path=https%3A%2F%2Fwww.example.com%2Ftag&tagpos=0x0&u=https%3A%2F%2Fwww.example.com%2Fxx111%2Fschedule.html&xd_support=1",
      "n1url":"http://www.example.com/xx111/schedule.html/"
    },
    {
      "in":"http://i.yimg.jp/images/listing/tool/yads/yads-iframe.html?s=99999_99999-999999&t=f&ssl=0&fr_id=yads_9999999-9&xd_support=99&fl_support=9999&fr_support=99&enc=UTF-8&pv_ts=9999999999999-999999&tag_path=https%3a%2f%2fwww.example.com%2ftag&page=1&u=http%3a%2f%2fwww.example.com%2f&ref=http%3a%2f%2fwww.example.com%2f&tagpos=0x0",
      "n1url":"http://www.example.com/"
    },
    {
      "in":"http://ssl.webtracker.jp/res/?arid=9-999999999999-99999999&cid=XXXXXXX&ssl=1&url=https%3A%2F%2Fwww.example.com%2Fnews%2F201711%2F24146736.html",
      "n1url":"http://www.example.com/news/201711/24146736.html/"
    },
    {
      "in":"http://a.t.webtracker.jp/res/?cid=XXXXXXXX&euid=YYYYYYYYYYY&url=http%3A%2F%2Fwww.example.com%2Felem%2F000%2F001%2F593%2F1593104%2F&arid=99-999999999999-999999999",
      "n1url":"http://www.example.com/elem/000/001/593/1593104/"
    },
    {
      "in":"http://adw.addlv.smt.docomo.ne.jp/tafs/p/sbst/?_adcount=1&_adinf=99999%7C0_&_aid=9999&_creativeids=99999_&_divid=foo_9999_99999&_fmt=js&_format=1&_frameid=9999999999999999999999&_ftype=1&_nocache=999999999999999999999&_slot=9999&_url=https%3A%2F%2Fwww.example.com%2Fentertainment%2Fcolumn%2F3921",
      "n1url":"http://www.example.com/entertainment/column/3921/"
    },
    {
      "in":"https://ad.deqwas-dsp.net/AdService/collection.aspx?client=ca-pub-9999999999999999&output=html&h=280&slotname=9999999999&adk=9999999999&adf=9999999999&w=435&fwrn=4&fwrnh=100&lmt=9999999999&loeid=999999999&rafmt=1&guci=9.9.9.9.9.9.9&format=435x280&url=https%3A%2F%2Fwww.example.com%2Ffoo%2F-%2F9999&flash=30.0.0&fwr=0&rh=0&rw=435.2&resp_fmts=3&wgl=1&adsid=XXXXXXXXXX&bpp=4&bdt=999&fdt=999&idt=999&shv=r99999999&cbv=r99999999&saldr=XX&abxe=99&prev_fmts=870x90,435x280&correlator=9999999999999&frm=20&pv=1&ga_vid=9999999999.9999999999&ga_sid=9999999999&ga_hid=999999999&ga_fc=0&icsg=99999999999999&dssz=99&mdo=0&mso=0&u_tz=540&u_his=10&u_java=1&u_h=818&u_w=1455&u_ah=791&u_aw=1455&u_cd=24&u_nplug=1&u_nmime=2&adx=450&ady=9999&biw=1275&bih=703&scr_x=0&scr_y=0&eid=99999999,999999999&oid=3&ref=https%3A%2F%2Fwww.example.com%2F&rx=0&eae=0&fc=1808&docm=11&brdim=164,73,-7,-7,1455,,1469,805,1291,718&vis=1&rsz=||leEbr|&abl=CS&ppjl=f&pfx=0&fu=1168&bc=1&ifi=14&xpc=ZOFsd15qSw&p=https%3A%2F%2Fwww.example.com&dtd=346",
      "n1url":"http://www.example.com/foo/-/9999/"
    },
    {
      "in":"https://krad20.deqwas.net/AdService/Collection.aspx?s=99999_999-999999&t=f&ssl=1&fr_id=yads_9999999-9&xd_support=1&fr_support=1&sb_support=0&enc=UTF-8&pv_ts=9999999999999-9999999&tag_path=https%3A%2F%2Fwww.example.com%2Ftag%0A&page=1&u=https%3A%2F%2Fwww.example.com%2Ffoo%2Fbar%2F9999999999999999999%3Fpage%3D2&canu=https%3A%2F%2Fwww.example.com%2Ffoo%2F8888888888888888888%0A&tagpos=0x9999&async=0",
      "n1url": "http://www.example.com/foo/bar/9999999999999999999/?page=2"
    },
    {
      "in": "https://itest.5ch.net/foo/test/read.cgi/abc/00000000",
      "n1url": "http://foo.5ch.net/test/read.cgi/abc/00000000/"
    },
    {
      "in": "https://itest.bbspink.com/bar/test/read.cgi/xyz/000000",
      "n1url": "http://bar.bbspink.com/test/read.cgi/xyz/000000/"
    },
    {
      "description": "unoptimizable",
      "in":"https://pubads.g.doubleclick.net/gampad/ads?_activity_context=true&android_num_video_cache_tasks=0&caps=inlineVideo_interactiveVideo_mraid1_mraid2_sdkVideo_th_autoplay_mediation_av_transparentBackground_sdkAdmobApiForAds_di_aso_sfv_dinm_dim_dinmo_gcache&eid=999999999%2C999999999%2C999999999&format=320x50_mb&heap_free=9999999&heap_max=999999999&heap_total=99999999&js=afma-sdk-a-v11746038.9452000.2&mr=99999999999999999%2C-999999999999999999%2C9999999999999999999%2C-9999999999999999999%2C-9999999999999999999%",
      "n1url":"http://pubads.g.doubleclick.net/gampad/ads/?_activity_context=true&android_num_video_cache_tasks=0&caps=inlineVideo_interactiveVideo_mraid1_mraid2_sdkVideo_th_autoplay_mediation_av_transparentBackground_sdkAdmobApiForAds_di_aso_sfv_dinm_dim_dinmo_gcache&eid=999999999%2C999999999%2C999999999&format=320x50_mb&heap_free=9999999&heap_max=999999999&heap_total=99999999&js=afma-sdk-a-v11746038.9452000.2"
    }
  ]
}
